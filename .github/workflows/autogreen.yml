name: Push to Codeberg

on:
  workflow_dispatch:        # 手動觸發
  schedule:
    - cron: "0 */6 * * *"   # 每 6 小時一次，自己改

jobs:
  sync:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout GitHub repo
      uses: actions/checkout@v4

    - name: Setup Git identity
      run: |
        git config --global user.name "github-actions"
        git config --global user.email "github-actions@users.noreply.github.com"

    - name: Add Codeberg remote
      run: |
        git remote add codeberg https://${{ secrets.CODEBERG_USERNAME }}:${{ secrets.CODEBERG_TOKEN }}@codeberg.org/${{ secrets.CODEBERG_USERNAME }}/${{ secrets.CODEBERG_REPO }}.git

    - name: Push to Codeberg
      run: |
        git push codeberg HEAD:main --force
