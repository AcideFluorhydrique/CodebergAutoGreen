name: Push to Codeberg

on:
  workflow_dispatch:          # 手動觸發
  schedule:
    - cron: "0 */6 * * *"     # 每 6 小時自動，按需求可修改

jobs:
  sync:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout GitHub repository
      uses: actions/checkout@v4

    - name: Configure Git identity
      run: |
        git config --global user.name "lanticy"   # ← 你的 Codeberg 顯示名稱
        git config --global user.email "lanticy@noreply.codeberg.org"  # ← 使用你提供的 noreply email

    - name: Add Codeberg remote
      run: |
        git remote add codeberg https://${{ secrets.CODEBERG_USERNAME }}:${{ secrets.CODEBERG_TOKEN }}@codeberg.org/${{ secrets.CODEBERG_USERNAME }}/${{ secrets.CODEBERG_REPO }}.git

    - name: Push to Codeberg
      run: |
        git push codeberg HEAD:main --force
